## Fix constraints on apache-airflow-core for apache-airflow-task-sdk
# Each document targets a specific apache-airflow-task-sdk version and
# adds a missing constraint on apache-airflow-core. We keep other
# constraints intact by using add_constrains rather than reset_constrains.
#
# Note: This constraint has been missing in some builds due to a
# circular dependency between apache-airflow-task-sdk and
# apache-airflow-core. These patches ensure the proper constraint is
# present and correct.

---
if:
  name: apache-airflow-task-sdk
  version: 1.0.0
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <=3.1.0,>=3.0.0

---
if:
  name: apache-airflow-task-sdk
  version: 1.0.1
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.1.0,>=3.0.1

---
if:
  name: apache-airflow-task-sdk
  version: 1.0.2
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.1.0,>=3.0.2

---
if:
  name: apache-airflow-task-sdk
  version: 1.0.3
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.1.0,>=3.0.3

---
if:
  name: apache-airflow-task-sdk
  version: 1.0.4
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.1.0,>=3.0.4

---
if:
  name: apache-airflow-task-sdk
  version: 1.0.5
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.1.0,>=3.0.5

---
if:
  name: apache-airflow-task-sdk
  version: 1.0.6
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.1.0,>=3.0.6

---
if:
  name: apache-airflow-task-sdk
  version: 1.1.0
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.2.0,>=3.1.0

---
if:
  name: apache-airflow-task-sdk
  version: 1.1.1
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.2.0,>=3.1.1

---
if:
  name: apache-airflow-task-sdk
  version: 1.1.2
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.2.0,>=3.1.2

---
if:
  name: apache-airflow-task-sdk
  version: 1.1.3
  not_has_constrains: apache-airflow-core?( *)
  timestamp_lt: 1763538129000
then:
  - add_constrains: apache-airflow-core <3.2.0,>=3.1.3
