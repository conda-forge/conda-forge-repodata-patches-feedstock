# Both dask-core and xarray introduced breaking changes that cause earlier
# versions of spatialdata to fail. Upper bounds were added to spatialdata 0.2.3
# build number 1 in https://github.com/conda-forge/spatialdata-feedstock/pull/17
if:
  name: spatialdata
  version_le: "0.2.3"
  timestamp_lt: 1749755828000
then:
  - tighten_depends:
      name: dask-core
      upper_bound: "2025"
  - tighten_depends:
      name: xarray
      upper_bound: "2024.10"
---
# spatialdata 0.5.0 introduced a minimum requirement of multiscale-spatial-image
# 2.0.3. However, spatialdata is incompatible with multiscale-spatial-image
# 2.1.0. Thus only 2.0.3 should be installed. This patch ensures spatialdata
# versions 0.5.0, 0.6.0, and the first build of 0.6.1 install the correct
# version.
#
# https://github.com/conda-forge/spatialdata-feedstock/pull/28
# https://github.com/conda-forge/spatialdata-feedstock/pull/27#discussion_r2640534330
# https://github.com/conda-forge/spatialdata-feedstock/pull/21
if:
  name: spatialdata
  version_ge: "0.5.0"
  version_le: "0.6.1"
  timestamp_lt: 1767818308000
then:
  - replace_depends:
      old: "multiscale-spatial-image >=2.0.3"
      new: "multiscale-spatial-image 2.0.3"
