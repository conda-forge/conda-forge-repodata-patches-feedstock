# yaml-language-server: $schema=../patch_yaml_model.json
# from this bit of code
# # ipykernel >=4.0.1,<6.5.0 needs ipython_genutils. Old versions of
# # ipython and traitlets depend on ipython_genutils so the dependency
# # was originally satisfied indirectly. Newer versions of ipython and
# # traitlets don't pull in ipython_genutils anymore so we need to make
# # that dependency explicit.
# if (record_name == "ipykernel" and record.get("timestamp", 0) <= 1664184744000 and
#         parse_version("4.0.1") <=
#         parse_version(record["version"]) < parse_version("6.5.0")):
#     for dep in record["depends"]:
#         if dep.startswith("ipython_genutils"):
#             break
#     else:
#         # Any version of ipython_genutils will do. The package is not
#         # developed anymore since it has been dropped by all its consumers.
#         record["depends"].append("ipython_genutils >=0.2.0")
if:
  name: ipykernel
  timestamp_le: 1664184744000
  version_ge: "4.0.1"
  version_lt: "6.5.0"
  not_has_depends: ipython_genutils?( *)
then:
  - add_depends: ipython_genutils >=0.2.0
---
# yaml-language-server: $schema=../patch_yaml_model.json
# see https://github.com/conda-forge/ipykernel-feedstock/pull/204
if:
  name: ipykernel
  timestamp_le: 1770429623000
  version_eq: "7.2.0"
  build_number_eq: 0
then:
  - replace_depends:
      old: jupyter_client >=8.0.0
      new: jupyter_client >=8.8.0
  - replace_depends:
      old: jupyter_core >=4.12,!=5.0.*
      new: jupyter_core >=5.1,!=6.0.*
  - replace_depends:
      old: tornado >=6.2
      new: tornado >=6.4.1
